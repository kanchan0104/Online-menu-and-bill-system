<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
  <link rel="stylesheet" href="css/templatemo-style.css">
  <link rel="stylesheet" href="css/home.css">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Generate a QR code image to point to a website URL"
    />
    <meta
      name="keywords"
      content="qr code, qr codes, qrcodes, create qr code, qr code generator, create qrcodes, make a qr code, online qr code"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"
      integrity="sha512-CNgIRecGo7nphbeZ04Sc13ka07paqdeTu0WR1IM4kNcpmBAUSHSQX0FslNhTDadL4O5SAGapGt4FodqL8My0mA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Poppins", "sans-serif"],
            },
          },
        },
      };
    </script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"
      integrity="sha512-CNgIRecGo7nphbeZ04Sc13ka07paqdeTu0WR1IM4kNcpmBAUSHSQX0FslNhTDadL4O5SAGapGt4FodqL8My0mA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <!-- <link rel="stylesheet" href="css/styles.css"> -->
    <script src="js/script.js" defer></script>
    <style>
      #spinner {
        display: none;
      }
    </style>
<style>
.grid-container {
  display: grid;
  grid-template-columns: auto auto auto auto;
  padding: 10px;
  justify-items: center;
}
.grid-item {
  background-color: rgba(255, 255, 255, 0.8);
  padding: 20px;
  font-size: 30px;
  text-align: center;
  box-shadow: none;
}
.grid-item:hover{
  transform: none;
  background-color: white;
  text-shadow: none;
}
.grid-item img{
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}
</style>
<style>
        
        
  .flex-container {
  display: flex;
  
  }
  #left {
  flex-basis: 80%;
  }
 

  

</style>
    <script src="js/script.js" defer></script>
    <style>
      #spinner {
        display: none;
      }
    </style>
    <title>Home</title>
  </head>
  <body id="body-pd">
    <header class="header" id="header">
        <div class="header_toggle"> <i class='bx bx-menu' id="header-toggle"></i> </div>
        
    </header>
    <div class="l-navbar" id="nav-bar">
        <nav class="nav">
            <div> <a href="#" class="nav_logo px-0"> <img src="images/logo.png" width="50"><span class="nav_logo-name">Dineazy</span> </a>
                <div class="nav_list"> <a href="/dashboard" class="nav_link"> <i class='bx bx-grid-alt nav_icon'></i> <span class="nav_name">Dashboard</span> </a> <a href="/sales" class="nav_link"> <i class="nav_icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bar-chart" viewBox="0 0 16 16">
                    <path d="M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5v12h-2V2h2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"/>
                  </svg></i> <span class="nav_name">Total Sales</span> </a> <a href="#" class="nav_link"> <i><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-menu-button" viewBox="0 0 16 16">
                    <path d="M0 1.5A1.5 1.5 0 0 1 1.5 0h8A1.5 1.5 0 0 1 11 1.5v2A1.5 1.5 0 0 1 9.5 5h-8A1.5 1.5 0 0 1 0 3.5v-2zM1.5 1a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5h-8z"/>
                    <path d="m7.823 2.823-.396-.396A.25.25 0 0 1 7.604 2h.792a.25.25 0 0 1 .177.427l-.396.396a.25.25 0 0 1-.354 0zM0 8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8zm1 3v2a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2H1zm14-1V8a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v2h14zM2 8.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0 4a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"/>
                  </svg></i> <span class="nav_name">Create Menu</span> </a> <a href="#" class="nav_link"> <i><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-menu-button" viewBox="0 0 16 16">
                    <path d="M0 1.5A1.5 1.5 0 0 1 1.5 0h8A1.5 1.5 0 0 1 11 1.5v2A1.5 1.5 0 0 1 9.5 5h-8A1.5 1.5 0 0 1 0 3.5v-2zM1.5 1a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5h-8z"/>
                    <path d="m7.823 2.823-.396-.396A.25.25 0 0 1 7.604 2h.792a.25.25 0 0 1 .177.427l-.396.396a.25.25 0 0 1-.354 0zM0 8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8zm1 3v2a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2H1zm14-1V8a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v2h14zM2 8.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0 4a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"/>
                  </svg></i> <span class="nav_name">Update Menu</span> </a> <a href="/view" class="nav_link"><i class='bx bxs-user-badge' ></i><span class="nav_name">Manage Staff</span></a> </div>
                  <a href="/generateqr" class="nav_link"> <i class='bx bx-qr'></i><span class="nav_name">Generate QR</span> </a><a href="#" class="nav_link  active"> <i class='bx bx-qr-scan'></i><span class="nav_name">Display QR</span> </a>
                </div> <a href="/logout" style="color: #ce3232;padding:0 0 10px 10px"> <i class='bx bx-log-out nav_icon'></i> <span class="nav_name">    SignOut</span> </a>
        </nav>
    </div>
    
  <div class="grid-container container pt-5 pb-5" style="margin-top: 50px;">
  </div>
  <script>
      var dat = JSON.parse('<%-JSON.stringify(data)%>');
      for(var i=0;i<dat.length;i++){
          
          var tno=dat[i].tno;
          var node = document.createElement("div");
          var ht = "<span class='qr'></span><p style='margin:10px 0 10px 0; font-size: 25px'>Table number = "+tno+"</p><span class='btn'></span>";
          node.classList.add("grid-item");
          node.innerHTML=ht;
          document.querySelector(".grid-container").appendChild(node);
      }
      const generateQRCode = (url, size, index) => {
        const qrcode = new QRCode(document.querySelectorAll(".qr")[index], {
          text: url,
          width: size,
          height: size,
        });
    };
  
    const createSaveBtn = (index) => {
      var saveUrl="";
      setTimeout(() => {
        // Get save url
        saveUrl = document.querySelectorAll(".grid-item")[index].querySelector('img').getAttribute("src");
        console.log(saveUrl);
        const link = document.createElement('a');
      link.id = 'save-link';
      link.setAttribute("style","font-size:25px");
      link.classList =
        'section-btn py-2 w-1/3 m-auto px-5 my-5';
      link.href = saveUrl;
      link.download = 'qrcode';
      link.innerHTML = 'Save Image';
      document.querySelectorAll(".btn")[index].appendChild(link);
        // Create save button
      }, 50);
      
      
    };
    //document.getElementById("star3").onclick=function(){
      //document.cookie=""
    //};
      for(var i=0;i<dat.length;i++){
        var url=dat[i].url;
        generateQRCode(url,300,i);
      }
      for(var i=0;i<dat.length;i++){
        createSaveBtn(i);
          
      }
  
  </script>
  <script src="js/home.js"></script>
</body>
</html>
